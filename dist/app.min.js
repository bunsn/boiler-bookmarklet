!function t(e,n,r){function o(i,u){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};e[i][0].call(f.exports,function(t){var n=e[i][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){var r=t("@bunsn/boiler/statement-definitions"),o=t("@bunsn/boiler/statement"),a=t("./lib/csv"),i=t("./lib/download"),u=r.findBy("host",window.location.host),s=new o(u),c=a.stringify(s.transactions.toArray()),f=new Blob([c],{type:"text/csv"});i(URL.createObjectURL(f),{filename:s.name()})},{"./lib/csv":3,"./lib/download":4,"@bunsn/boiler/statement":12,"@bunsn/boiler/statement-definitions":11}],2:[function(t,e,n){function r(t,e){function n(t){return t.map(r).join(e)}function r(t){t=String(t);var n=/"/.test(t),r=/[\n\r]/.test(t),i=new RegExp(e).test(t);return n&&(t=o(t)),(n||r||i)&&(t=a(t)),t}function o(t){return t.replace(/"/g,'""')}function a(t){return'"'+t+'"'}return t.map(n).join("\n")}e.exports=r},{}],3:[function(t,e,n){var r=t("./array-to-dsv");e.exports={stringify:function(t){return r(t,",")}}},{"./array-to-dsv":2}],4:[function(t,e,n){function r(t,e){e=e||{};var n=document.createElement("a");n.href=t,n.download=e.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n)}e.exports=r},{}],5:[function(t,e,n){var r=t("./make-number");e.exports=function(t){return Math.abs(r(t))}},{"./make-number":6}],6:[function(t,e,n){e.exports=function(t){return Number(String(t).replace(/[^\d\.-]/g,""))}},{}],7:[function(t,e,n){function r(t,e){function n(t){for(var e=0;e<r.length;e++)if(t.test(r[e]))return e}var r=e.split(/[^DMY]+/),a=RegExp(e.replace(/DD?/,"(\\d\\d?)").replace(/M{3,4}/,"(\\w{3,})").replace(/MM?/,"(\\d\\d?)").replace(/Y{2,4}/,"(\\d{2,4})")),i=t.match(a);if(!i)throw new Error("Cannot parse: `"+t+"` with format: `"+e+"`");i=i.splice(1);var u=i[n(/D/)],s=function(){var t,e=n(/M/),a=r[e],u=i[e];return t=a.length>2?o[a].indexOf(u):Number(u)-1}(),c=function(){var t=i[n(/Y/)];return t&&2===t.length&&(t="20"+t),t}();return{year:c,month:s,date:u}}var o={MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"]};e.exports=r},{}],8:[function(t,e,n){e.exports=function(t){return"function"==typeof t?t.call(t):t}},{}],9:[function(t,e,n){function r(t,e){e=e||{};var n=e.processRow||i,r=e.processCell||i;return a(t.querySelectorAll("tbody tr"),function(t,e,i){var u=a(t.cells,function(t,e,n){return r(o(t),e,n,t)});return n(u,e,i,t)})}function o(t){function e(t){return t.replace(/\s{2,}/g," ").trim()}return e(t.textContent)}function a(t,e){return Array.prototype.map.call(t,e)}function i(t){return t}e.exports=r},{}],10:[function(t,e,n){function r(t,e){for(var n={},r=t.length-1;r>=0;r--)n[t[r]]=e[r];return n}e.exports=r},{}],11:[function(t,e,n){var r=[{institution:"HSBC",host:"www.saas.hsbc.co.uk",columns:["date","type","description","paidOut","paidIn","balance"],dateFormat:"DD MMM",table:function(){return document.querySelector('table[summary="This table contains a statement of your account"]')},date:function(){for(var t=["#content > div.containerMain div.hsbcTextRight","#detail-switch > table > tbody > tr:nth-child(3) > td.extTableColumn2"],e=0;e<t.length;e++){var n=document.querySelector(t[e]).textContent;if(Date.parse(n))return new Date(n)}}},{institution:"NatWest",host:"www.nwolb.com",columns:["date","type","description","paidIn","paidOut","balance"],dateFormat:"D MMM YYYY",table:function(){return window.frames.ctl00_secframe.contentDocument.querySelector(".ItemTable")}}];r.findBy=function(t,e){for(var n=this.length-1;n>=0;n--){var r=this[n];if(r[t]===e)return r}return null},r.findByHost=function(t){return this.findBy("host",t)},e.exports=r},{}],12:[function(t,e,n){function r(t){for(var e in t)this[e]=o(t[e]);var n=a(this.table,{processRow:function(t){return this.createTransaction(i(this.columns,t))}.bind(this)});this.transactions=new s(n,this)}var o=t("./lib/result"),a=t("./lib/table-to-array"),i=t("./lib/weld"),u=t("./transaction"),s=t("./transactions");r.prototype.createTransaction=function(t){return t.dateString=t.date,t.dateFormat=this.dateFormat,delete t.date,new u(t)},r.prototype.name=function(){var t=this.institution+" Statement";return this.transactions.length?t+" "+this.transactions.last().getFormatted("date"):t},e.exports=r},{"./lib/result":8,"./lib/table-to-array":9,"./lib/weld":10,"./transaction":15,"./transactions":16}],13:[function(t,e,n){function r(t,e,n){n=n||{};var r=o(t,e);this.year=r.year,this.month=r.month,this.date=r.date,!this.year&&n.succeedingDate&&this.calculateYear(n.succeedingDate)}var o=t("./lib/parse-date");r.prototype.toDate=function(){if(!Date.parse(this.year,this.month,this.date))return null;var t=new Date(this.year,this.month,this.date);return t.setHours(t.getHours()-t.getTimezoneOffset()/60),t},r.prototype.calculateYear=function(t){var e=t.getFullYear();0===t.getMonth()&&11===this.month&&e--,this.year=e},e.exports=r},{"./lib/parse-date":7}],14:[function(t,e,n){function r(t){this.dates=t}r.prototype.chronological=function(){var t=this.uniq();return t.length<2?!0:this.compare(t[0],t[1])>=0},r.prototype.uniq=function(){function t(t){return e.some(function(e){return e.year===t.year&&e.month===t.month&&e.date===t.date})}for(var e=[],n=0;n<this.dates.length;n++){var r=this.dates[n];t(r)||e.push(r)}return e},r.prototype.compare=function(t,e){if(!(t.year&&e.year||11!==t.month||0!==e.month))return 1;if(t.year===e.year){if(t.month===e.month)return t.date>e.date?-1:t.date<e.date?1:0;if(t.month>e.month)return-1;if(t.month<e.month)return 1}return t.year>e.year?-1:t.year<e.year?1:void 0},e.exports=r},{}],15:[function(t,e,n){function r(t){this.attributes={};for(var e in t)this.set(e,t[e]);this.get("date")||this.setDate(),this.get("amount")||this.setAmount()}function o(t,e){return t?t:-e}function a(t){function e(t){return String("00"+t).slice(-2)}var n=t.getFullYear(),r=e(t.getMonth()+1),o=e(t.getDate());return[n,r,o].join("-")}var i=t("./lib/number/make-number"),u=t("./lib/number/make-absolute-number"),s=t("./transaction-date");r.prototype.transformers={amount:i,balance:i,paidIn:u,paidOut:u},r.prototype.formatters={date:a},r.prototype.output=["date","amount","description"],r.prototype.set=function(t,e){var n=this.transformers[t]||function(t){return t};this.attributes[t]=n(e)},r.prototype.get=function(t){return this.attributes[t]},r.prototype.getFormatted=function(t){var e=this.get(t),n=this.formatters[t];return"function"==typeof n&&(e=n(e)),e},r.prototype.isValid=function(){return this.toArray().every(function(t){return Boolean(t)})},r.prototype.toArray=function(){return this.output.map(this.getFormatted.bind(this))},r.prototype.toJSON=function(){for(var t={},e=this.output.length-1;e>=0;e--){var n=this.output[e];t[n]=this.getFormatted(n)}return t},r.prototype.setDate=function(t){t=t||{};var e=t.dateString||this.get("dateString"),n=t.dateFormat||this.get("dateFormat"),r=t.succeedingDate,o=new s(e,n,{succeedingDate:r});this.set("transactionDate",o),this.set("date",o.toDate())},r.prototype.setAmount=function(){var t=this.get("paidIn"),e=this.get("paidOut");this.set("amount",o(t,e))},e.exports=r},{"./lib/number/make-absolute-number":5,"./lib/number/make-number":6,"./transaction-date":13}],16:[function(t,e,n){function r(t,e){if(r._injectPrototypeMethods(t),!/Y{2,}/.test(e.dateFormat)){t.chronological()||(t=t.reverse());for(var n=e.date,o=t.length-1;o>=0;o--){var a=t[o];a.setDate({succeedingDate:n}),n=a.get("date")}}return t}function o(){var t=this.map(function(t){return t.get("transactionDate")});return new a(t)}var a=t("./transaction-dates");r.prototype.chronological=function(){return o.call(this).chronological()},r.prototype.first=function(){return this[0]},r.prototype.last=function(){return this[this.length-1]},r.prototype.toArray=function(){return this.map(function(t){return t.toArray()})},r.prototype.toJSON=function(){return this.map(function(t){return t.toJSON()})},r._injectPrototypeMethods=function(t){for(var e in this.prototype)this.prototype.hasOwnProperty(e)&&(t[e]=this.prototype[e])},e.exports=r},{"./transaction-dates":14}]},{},[1]);